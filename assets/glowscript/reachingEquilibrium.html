<!--
	Javascript code auto-converted from glowscript.org. Original program at:
    https://www.glowscript.org/#/user/naspitha/folder/AACSims/program/speedDist
-->
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Particle Kinetics</title>
    <link type="text/css" href="jquery-ui.custom.css" rel="stylesheet" />
    <!-- <link type="text/css" href="/assets\css\main.css" " />
    -->
    <link type="text/css" href="ide.css" rel="stylesheet" rel="stylesheet" />
    <!-- <link type="text/css" href="/assets\css\main.css" rel="stylesheet" rel="stylesheet" /> -->
  </head>

<body>
    <div id="glowscript" class="glowscript" style="width: 100%; max-width:1200px">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <script type="text/javascript" src="jquery.min.js"></script>
        <script type="text/javascript" src="jquery-ui.custom.min.js"></script>
        <script type="text/javascript" src="glow.3.2.min.js"></script>
        <script type="text/javascript" src="RSrun.3.2.min.js"></script>
        <!-- <script type="text/javascript" src="https://www.glowscript.org/lib/jquery/2.1/jquery.min.js"></script> -->
        <!-- <script type="text/javascript" src="https://www.glowscript.org/lib/jquery/2.1/jquery-ui.custom.min.js"></script> -->
        <!-- <script type="text/javascript" src="https://www.glowscript.org/package/glow.3.2.min.js"></script> -->
        <!-- <script type="text/javascript" src="https://www.glowscript.org/package/RSrun.3.2.min.js"></script> -->
        <script type="text/javascript">
var window_width = document.getElementById("glowscript").offsetWidth        
// START JAVASCRIPT
;(function() {;
var ρσ_modules = {};
var running, a, A_list, B_list, t, t_i, nHA, nA, nHB, nB;
ρσ_modules.pythonize = {};

(function(){
    function strings() {
        var string_funcs, exclude, name;
        string_funcs = set("capitalize strip lstrip rstrip islower isupper isspace lower upper swapcase center count endswith startswith find rfind index rindex format join ljust rjust partition rpartition replace split rsplit splitlines zfill".split(" "));
        if (!arguments.length) {
            exclude = (function(){
                var s = ρσ_set();
                s.jsset.add("split");
                s.jsset.add("replace");
                return s;
            })();
        } else if (arguments[0]) {
            exclude = Array.prototype.slice.call(arguments);
        } else {
            exclude = null;
        }
        if (exclude) {
            string_funcs = string_funcs.difference(set(exclude));
        }
        var ρσ_Iter0 = string_funcs;
        ρσ_Iter0 = ((typeof ρσ_Iter0[Symbol.iterator] === "function") ? (ρσ_Iter0 instanceof Map ? ρσ_Iter0.keys() : ρσ_Iter0) : Object.keys(ρσ_Iter0));
        for (var ρσ_Index0 of ρσ_Iter0) {
            name = ρσ_Index0;
            (ρσ_expr_temp = String.prototype)[(typeof name === "number" && name < 0) ? ρσ_expr_temp.length + name : name] = (ρσ_expr_temp = ρσ_str.prototype)[(typeof name === "number" && name < 0) ? ρσ_expr_temp.length + name : name];
        }
    };
    if (!strings.__module__) Object.defineProperties(strings, {
        __module__ : {value: "pythonize"}
    });

    ρσ_modules.pythonize.strings = strings;
})();
async function __main__() {
"use strict";
    var display = canvas;
    var scene = canvas();

    var version, print, arange, __name__, type, ρσ_ls, win, side, A_tot, nHAi, B_tot, nHBi, A_rad, B_rad, H_rad, HA_clr, A_clr, HB_clr, B_clr, H_clr, H2_clr, particle_speed, time_limit, real_time, dt, running, durSleep, K_A, K_B, K_w, K, p_HA_A, p_A_HA, partscreen, container, pPwidth, pPheight, a, b, pos, c, d, ps, playPausePos, playPauseBox, playPauseText, resetPos, resetBox, resetText, nHA, nHB, nA, nB, Cgraph, fHA, fA, fHB, fB, leg_1, leg_2, A_list, B_list, ion_pos, theta, vel, proton_pos, proton2_pos, visible, clr, gA, i, gB, t, t_i, g1, hitlist, c1, c2, v1, v2, vtot, vrel, rrel, dx, dy, alpha, d_in, deltat, pcm1, pcm2, g2, chance;
    version = ρσ_list_decorate([ "3.2", "glowscript" ]);
    Array.prototype['+'] = function(r) {return this.concat(r)}
    Array.prototype['*'] = function(r) {return __array_times_number(this, r)}
    window.__GSlang = "vpython";
    print = GSprint;
    arange = range;
    __name__ = "__main__";
    type = pytype;
    var strings = ρσ_modules.pythonize.strings;

    strings();
    "11";
    win = window_width*0.45;
    "12";
    side = 25;
    "13";
    A_tot = 100;
    "14";
    nHAi = A_tot;
    "15";
    B_tot = 100;
    "16";
    nHBi = 0;
    "17";
    A_rad = .4;
    "18";
    B_rad = .4;
    "19";
    H_rad = .2;
    "20";
    HA_clr = vec(.8, .8, 0);
    A_clr = vec(.8, .6, 0);
    "21";
    HB_clr = vec(0, .8, .8);
    B_clr = vec(0, .5, .8);
    "22";
    H_clr = vec(.9, .9, .9);
    "23";
    H2_clr = HA_clr["+"](H_clr)["*"](.5);
    "24";
    particle_speed = 1;
    "25";
    time_limit = 70;
    "26";
    real_time = 5e-4["/"](.001);
    "27";
    dt = .05;
    "28";
    running = false;
    "29";
    durSleep = 10;
    "30";
    K_A = Math.pow(10, (1["-u"]()["*"](6.92)));
    "31";
    K_B = Math.pow(10, (1["-u"]()["*"](4.6)));
    "32";
    K_w = 1e-14;
    "33";
    K = K_A["*"](K_B)["/"](K_w);
    "34";
    p_HA_A = K["/"](K["+"](1));
    "35";
    p_A_HA = 1["/"](K["+"](1));
    "37";
    partscreen = ρσ_interpolate_kwargs.call(this, canvas, [ρσ_desugar_kwargs({width: win, height: win, align: "left", background: vec(.1, .1, .1), userzoom: false, userspin: false, userpan: false, resizable: false})]);
    "39";
    partscreen.range = side["*"](.5);
    "40";
    container = ρσ_interpolate_kwargs.call(this, curve, [ρσ_desugar_kwargs({pos: ρσ_list_decorate([ vec(1["-u"]()["*"](side)["/"](2), side["/"](2), 0), vec(side["/"](2), side["/"](2), 0), vec(side["/"](2), 1["-u"]()["*"](side)["/"](2), 0), vec(1["-u"]()["*"](side)["/"](2), 1["-u"]()["*"](side)["/"](2), 0), vec(1["-u"]()["*"](side)["/"](2), side["/"](2), 0) ]), color: vec(.3, .3, .5), radius: .05, emissive: true, visible: false})]);
    "44";
    pPwidth = side["/"](6);
    pPheight = side["/"](14);
    "45";
    a = vec(1["-u"]()["*"](side)["/"](2)["*"](.9), side["/"](2)["*"](.9), .5);
    "46";
    b = pos = vec(1["-u"]()["*"](side)["/"](2)["*"](.95)["+"](pPwidth), side["/"](2)["*"](.95), .5);
    "47";
    c = pos = vec(1["-u"]()["*"](side)["/"](2)["*"](.95)["+"](pPwidth), side["/"](2)["*"](.95)["-"](1["*"](pPheight)), .5);
    "48";
    d = ps = vec(1["-u"]()["*"](side)["/"](2)["*"](.95), side["/"](2)["*"](.95)["-"](1["*"](pPheight)), .5);
    "49";
    playPausePos = a["+"](b)["+"](c)["+"](d)["/"](4);
    "50";
    playPauseBox = ρσ_interpolate_kwargs.call(this, box, [ρσ_desugar_kwargs({pos: playPausePos, length: pPwidth, height: pPheight, width: .01, color: vec(0, 0.7, 0), emissive: true, opacity: 1})]);
    "51";
    playPauseText = ρσ_interpolate_kwargs.call(this, label, [ρσ_desugar_kwargs({pos: playPausePos, text: "Play", align: "center", opacity: 0, height: win["/"](19), box: false, color: vec(1, 1, 1)})]);
    "52";
    resetPos = playPausePos["+"](vec(side["/"](5), 0, 0));
    "53";
    resetBox = ρσ_interpolate_kwargs.call(this, box, [ρσ_desugar_kwargs({pos: resetPos, length: pPwidth, height: pPheight, width: .01, color: vec(.8, .6, 0), emissive: true, opacity: 1})]);
    "54";
    resetText = ρσ_interpolate_kwargs.call(this, label, [ρσ_desugar_kwargs({pos: resetPos, text: "Reset", align: "center", opacity: 0, height: win["/"](19), box: false, color: vec(1, 1, 1)})]);
    "59";
    nHA = nHAi;
    nHB = nHBi;
    "60";
    nA = A_tot["-"](1["*"](nHA));
    nB = B_tot["-"](1["*"](nHB));
    "62";
    Cgraph = ρσ_interpolate_kwargs.call(this, graph, [ρσ_desugar_kwargs({title: " ", xtitle: "Zeit (ms)", ytitle: "Konzentration (μmol/L)", xmin: 0, xmax: time_limit["*"](real_time), 
                    ymin: 0, ymax: max(ρσ_list_decorate([ A_tot, B_tot ])), background: color.white, align: "left", width: win*0.8, height:win*0.8})]);
    "66";
    fHA = ρσ_interpolate_kwargs.call(this, gcurve, [ρσ_desugar_kwargs({graph: Cgraph, color: HA_clr, interval: 10, width: 3})]);
    "67";
    fA = ρσ_interpolate_kwargs.call(this, gcurve, [ρσ_desugar_kwargs({graph: Cgraph, color: A_clr, label: "[HS<sup>-<\/sup>] = [HCN]", interval: 10, visible: false, width: 3})]);
    "68";
    fHB = ρσ_interpolate_kwargs.call(this, gcurve, [ρσ_desugar_kwargs({graph: Cgraph, color: HB_clr, interval: 10, visible: true, width: 3})]);
    "69";
    fB = ρσ_interpolate_kwargs.call(this, gcurve, [ρσ_desugar_kwargs({graph: Cgraph, color: B_clr, label: "[B]", interval: 10, visible: false, width: 3})]);
    "71";;
    "72";
    leg_1 = ρσ_interpolate_kwargs.call(this, wtext, [ρσ_desugar_kwargs({text: "[H<sub>2</sub>S] = [CN<sup>-</sup>]", pos: partscreen.caption_anchor, background: HA_clr})]);
    "73";;
    "74";
    leg_2 = ρσ_interpolate_kwargs.call(this, wtext, [ρσ_desugar_kwargs({text: "[HCN] = [HS-]", pos: partscreen.caption_anchor, background: HB_clr})]);
    "76";
    fHA.plot(0, nHA);
    "77";
    fA.plot(0, nA);
    "78";
    fHB.plot(0, nHB);
    "79";
    fB.plot(0, nB);
    "82";
    A_list = ρσ_list_decorate([]);
    B_list = ρσ_list_decorate([]);
    "83";
    for (var ρσ_Index1 = 0; ρσ_Index1["<"](A_tot); ρσ_Index1++) {
        i = ρσ_Index1;
        "84";
        ion_pos = vec(1["-u"]()["*"](side)["/"](2)["+"](side["*"](random())), 1["-u"]()["*"](side)["/"](2)["+"](side["*"](random())), 0);
        "85";
        theta = random()["*"](pi)["*"](2);
        "86";
        vel = vec(particle_speed["*"](cos(theta)), particle_speed["*"](sin(theta)), 0);
        "90";
        proton_pos = ion_pos["+"](vec(A_rad["/"](sqrt(2)), A_rad["/"](sqrt(2)), 0));
        "91";
        proton2_pos = ion_pos["+"](vec(1["-u"]()["*"](A_rad), 0, 0));
        "92";
        if (i["<"](nHA)) {
            "93";
            visible = true;
            "94";
            clr = HA_clr;
            "95";
        } else {
            "96";
            visible = false;
            "97";
            clr = A_clr;
        }
        "98";
        gA = ρσ_list_decorate([ ρσ_interpolate_kwargs.call(this, sphere, [ρσ_desugar_kwargs({radius: A_rad, color: clr, pos: ion_pos, species: "A", opacity: .7, vel: vel, sleepCounter: 0})]), ρσ_interpolate_kwargs.call(this, sphere, [ρσ_desugar_kwargs({radius: H_rad, color: H_clr, pos: proton_pos, species: "H", visible: visible})]), ρσ_interpolate_kwargs.call(this, sphere, [ρσ_desugar_kwargs({radius: H_rad, color: H2_clr, pos: proton2_pos, species: "H", visible: true})]) ]);
        "103";
        A_list.append(gA);
    }
    "105";
    for (var ρσ_Index2 = 0; ρσ_Index2["<"](B_tot); ρσ_Index2++) {
        i = ρσ_Index2;
        "106";
        ion_pos = vec(1["-u"]()["*"](side)["/"](2)["+"](side["*"](random())), 1["-u"]()["*"](side)["/"](2)["+"](side["*"](random())), 0);
        "107";
        theta = random()["*"](pi)["*"](2);
        "108";
        vel = vec(particle_speed["*"](cos(theta)), particle_speed["*"](sin(theta)), 0);
        "111";
        proton_pos = ion_pos["+"](vec(B_rad["/"](sqrt(2)), B_rad["/"](sqrt(2)), 0));
        "112";
        if (i["<"](nHB)) {
            "113";
            visible = true;
            "114";
            clr = HB_clr;
            "116";
        } else {
            "117";
            visible = false;
            "118";
            clr = B_clr;
        }
        "119";
        gB = ρσ_list_decorate([ ρσ_interpolate_kwargs.call(this, sphere, [ρσ_desugar_kwargs({radius: B_rad, color: clr, pos: ion_pos, species: "B", opacity: .7, vel: vel, sleepCounter: 0})]), ρσ_interpolate_kwargs.call(this, sphere, [ρσ_desugar_kwargs({radius: H_rad, color: H_clr, pos: proton_pos, species: "H", visible: visible})]) ]);
        "123";
        B_list.append(gB);
    }
    "125";
    async function PlayPause() {
        "126";
        "127";
        running = !running;
        "128";
        if ((playPauseText.text === "Replay" || typeof playPauseText.text === "object" && ρσ_equals(playPauseText.text, "Replay"))) {
            "129";
            (await Reset());
            "130";
        }
        if (running) {
            "131";
            playPauseText.text = "Pause";
            "132";
            playPauseBox.color = vec(.7, 0, 0);
            "133";
        } else {
            "134";
            playPauseText.text = "Play";
            "135";
            playPauseBox.color = vec(0, .7, 0);
        }
    };
    if (!PlayPause.__module__) Object.defineProperties(PlayPause, {
        __module__ : {value: null}
    });

    "137";
    async function Reset() {
        var ρσ_ls, ion_pos, theta, vel, proton_pos, proton2_pos, visible, clr, i;
        "138";
        "139";
        nHA = nHAi;
        nHB = nHBi;
        "140";
        nA = A_tot["-"](1["*"](nHA));
        nB = B_tot["-"](1["*"](nHB));
        "141";
        fHA.remove();
        fA.remove();
        fHB.remove();
        fB.remove();
        "142";
        for (var ρσ_Index3 = 0; ρσ_Index3["<"](A_tot); ρσ_Index3++) {
            i = ρσ_Index3;
            "143";
            ion_pos = vec(1["-u"]()["*"](side)["/"](2)["+"](side["*"](random())), 1["-u"]()["*"](side)["/"](2)["+"](side["*"](random())), 0);
            "144";
            theta = random()["*"](pi)["*"](2);
            "145";
            vel = vec(particle_speed["*"](cos(theta)), particle_speed["*"](sin(theta)), 0);
            "146";
            proton_pos = ion_pos["+"](vec(A_rad["/"](sqrt(2)), A_rad["/"](sqrt(2)), 0));
            "147";
            proton2_pos = ion_pos["+"](vec(1["-u"]()["*"](A_rad), 0, 0));
            "148";
            if (i["<"](nHA)) {
                "149";
                visible = true;
                "150";
                clr = HA_clr;
                "151";
            } else {
                "152";
                visible = false;
                "153";
                clr = A_clr;
            }
            "154";
            ρσ_getitem(ρσ_getitem(A_list, i), 0).pos = ion_pos;
            "155";
            ρσ_getitem(ρσ_getitem(A_list, i), 1).pos = proton_pos;
            "156";
            ρσ_getitem(ρσ_getitem(A_list, i), 2).pos = proton2_pos;
            "157";
            ρσ_getitem(ρσ_getitem(A_list, i), 1).visible = visible;
            "158";
            ρσ_getitem(ρσ_getitem(A_list, i), 0).color = clr;
            "159";
            ρσ_getitem(ρσ_getitem(A_list, i), 2).color = H2_clr;
        }
        "160";
        for (var ρσ_Index4 = 0; ρσ_Index4["<"](B_tot); ρσ_Index4++) {
            i = ρσ_Index4;
            "161";
            ion_pos = vec(1["-u"]()["*"](side)["/"](2)["+"](side["*"](random())), 1["-u"]()["*"](side)["/"](2)["+"](side["*"](random())), 0);
            "162";
            theta = random()["*"](pi)["*"](2);
            "163";
            vel = vec(particle_speed["*"](cos(theta)), particle_speed["*"](sin(theta)), 0);
            "164";
            proton_pos = ion_pos["+"](vec(B_rad["/"](sqrt(2)), B_rad["/"](sqrt(2)), 0));
            "165";
            if (i["<"](nHB)) {
                "166";
                visible = true;
                "167";
                clr = HB_clr;
                "168";
            } else {
                "169";
                visible = false;
                "170";
                clr = B_clr;
            }
            "171";
            ρσ_getitem(ρσ_getitem(B_list, i), 0).pos = ion_pos;
            "172";
            ρσ_getitem(ρσ_getitem(B_list, i), 1).pos = proton_pos;
            "173";
            ρσ_getitem(ρσ_getitem(B_list, i), 1).visible = visible;
            "174";
            ρσ_getitem(ρσ_getitem(B_list, i), 0).color = clr;
        }
        "175";
        fHA.plot(0, nHA);
        "176";
        fA.plot(0, nA);
        "177";
        fHB.plot(0, nHB);
        "178";
        fB.plot(0, nB);
        "179";
        t = 0;
        t_i = 0;
    };
    if (!Reset.__module__) Object.defineProperties(Reset, {
        __module__ : {value: null}
    });

    "181";
    async function Nothing() {
        "182";
        return;
    };
    if (!Nothing.__module__) Object.defineProperties(Nothing, {
        __module__ : {value: null}
    });

    "185";
    async function move_x(group, x_val) {
        var ρσ_ls, obj;
        "186";
        var ρσ_Iter5 = group;
        ρσ_Iter5 = ((typeof ρσ_Iter5[Symbol.iterator] === "function") ? (ρσ_Iter5 instanceof Map ? ρσ_Iter5.keys() : ρσ_Iter5) : Object.keys(ρσ_Iter5));
        for (var ρσ_Index5 of ρσ_Iter5) {
            obj = ρσ_Index5;
            "187";
            obj.pos.x=obj.pos.x["+"](x_val);
        }
    };
    if (!move_x.__argnames__) Object.defineProperties(move_x, {
        __argnames__ : {value: ["group", "x_val"]},
        __module__ : {value: null}
    });

    "188";
    async function move_y(group, y_val) {
        var ρσ_ls, obj;
        "189";
        var ρσ_Iter6 = group;
        ρσ_Iter6 = ((typeof ρσ_Iter6[Symbol.iterator] === "function") ? (ρσ_Iter6 instanceof Map ? ρσ_Iter6.keys() : ρσ_Iter6) : Object.keys(ρσ_Iter6));
        for (var ρσ_Index6 of ρσ_Iter6) {
            obj = ρσ_Index6;
            "190";
            obj.pos.y=obj.pos.y["+"](y_val);
        }
    };
    if (!move_y.__argnames__) Object.defineProperties(move_y, {
        __argnames__ : {value: ["group", "y_val"]},
        __module__ : {value: null}
    });

    "191";
    async function protonate(group) {
        "192";
        "193";
        ρσ_getitem(group, 1).visible = true;
        "194";
        if ((ρσ_getitem(group, 0).species === "A" || typeof ρσ_getitem(group, 0).species === "object" && ρσ_equals(ρσ_getitem(group, 0).species, "A"))) {
            "195";
            ρσ_getitem(group, 0).color = HA_clr;
            "196";
            ρσ_getitem(group, 2).color = HA_clr;
            "198";
            nHA=nHA["+"](1);
            nA=nA["-"](1);
            "199";
        } else if ((ρσ_getitem(group, 0).species === "B" || typeof ρσ_getitem(group, 0).species === "object" && ρσ_equals(ρσ_getitem(group, 0).species, "B"))) {
            "200";
            ρσ_getitem(group, 0).color = HB_clr;
            "202";
            nHB=nHB["+"](1);
            nB=nB["-"](1);
        }
    };
    if (!protonate.__argnames__) Object.defineProperties(protonate, {
        __argnames__ : {value: ["group"]},
        __module__ : {value: null}
    });

    "204";
    async function deprotonate(group) {
        "205";
        "206";
        ρσ_getitem(group, 1).visible = false;
        "207";
        if ((ρσ_getitem(group, 0).species === "A" || typeof ρσ_getitem(group, 0).species === "object" && ρσ_equals(ρσ_getitem(group, 0).species, "A"))) {
            "209";
            ρσ_getitem(group, 0).color = A_clr;
            "210";
            ρσ_getitem(group, 2).color = A_clr;
            "211";
            nHA=nHA["-"](1);
            nA=nA["+"](1);
            "212";
        } else if ((ρσ_getitem(group, 0).species === "B" || typeof ρσ_getitem(group, 0).species === "object" && ρσ_equals(ρσ_getitem(group, 0).species, "B"))) {
            "214";
            ρσ_getitem(group, 0).color = B_clr;
            "215";
            nHB=nHB["-"](1);
            nB=nB["+"](1);
        }
    };
    if (!deprotonate.__argnames__) Object.defineProperties(deprotonate, {
        __argnames__ : {value: ["group"]},
        __module__ : {value: null}
    });

    "217";
    async function hit_list(group, A_search, B_search) {
        var ρσ_ls, group_curr, group_prev, hit_list, g_curr, g;
        "221";
        group_curr = ρσ_getitem(group, 0).pos;
        "222";
        group_prev = ρσ_getitem(group, 0).pos["-"](1["*"](ρσ_getitem(group, 0).vel)["*"](dt));
        "224";
        hit_list = ρσ_dict();
        ρσ_setitem(hit_list, "A", ρσ_list_decorate([]));
        ρσ_setitem(hit_list, "B", ρσ_list_decorate([]));
        "225";
        var ρσ_Iter7 = A_search;
        ρσ_Iter7 = ((typeof ρσ_Iter7[Symbol.iterator] === "function") ? (ρσ_Iter7 instanceof Map ? ρσ_Iter7.keys() : ρσ_Iter7) : Object.keys(ρσ_Iter7));
        for (var ρσ_Index7 of ρσ_Iter7) {
            g = ρσ_Index7;
            "226";
            if ((g !== group && (typeof g !== "object" || ρσ_not_equals(g, group)))) {
                "227";
                g_curr = ρσ_getitem(g, 0).pos;
                "229";
                if (mag(g_curr["-"](1["*"](group_curr)))["<="](ρσ_getitem(g, 0).radius["+"](ρσ_getitem(group, 0).radius)["*"](1.4))) {
                    "230";
                    ρσ_getitem(hit_list, "A").append(g);
                }
            }
        }
        "232";
        var ρσ_Iter8 = B_search;
        ρσ_Iter8 = ((typeof ρσ_Iter8[Symbol.iterator] === "function") ? (ρσ_Iter8 instanceof Map ? ρσ_Iter8.keys() : ρσ_Iter8) : Object.keys(ρσ_Iter8));
        for (var ρσ_Index8 of ρσ_Iter8) {
            g = ρσ_Index8;
            "233";
            if ((g !== group && (typeof g !== "object" || ρσ_not_equals(g, group)))) {
                "234";
                g_curr = ρσ_getitem(g, 0).pos;
                "236";
                if (mag(g_curr["-"](1["*"](group_curr)))["<="](ρσ_getitem(g, 0).radius["+"](ρσ_getitem(group, 0).radius)["*"](1.4))) {
                    "237";
                    ρσ_getitem(hit_list, "B").append(g);
                }
            }
        }
        "238";
        return hit_list;
    };
    if (!hit_list.__argnames__) Object.defineProperties(hit_list, {
        __argnames__ : {value: ["group", "A_search", "B_search"]},
        __module__ : {value: null}
    });

    "241";
    async function ellastic_coll() {
        var g1 = ( 0 === arguments.length["-"](1) && arguments[arguments.length["-"](1)] !== null && typeof arguments[arguments.length["-"](1)] === "object" && arguments[arguments.length["-"](1)] [ρσ_kwargs_symbol] === true) ? undefined : arguments[0];
        var g2 = ( 1 === arguments.length["-"](1) && arguments[arguments.length["-"](1)] !== null && typeof arguments[arguments.length["-"](1)] === "object" && arguments[arguments.length["-"](1)] [ρσ_kwargs_symbol] === true) ? undefined : arguments[1];
        var g1_old = (arguments[2] === undefined || ( 2 === arguments.length["-"](1) && arguments[arguments.length["-"](1)] !== null && typeof arguments[arguments.length["-"](1)] === "object" && arguments[arguments.length["-"](1)] [ρσ_kwargs_symbol] === true)) ? ellastic_coll.__defaults__.g1_old : arguments[2];
        var g2_old = (arguments[3] === undefined || ( 3 === arguments.length["-"](1) && arguments[arguments.length["-"](1)] !== null && typeof arguments[arguments.length["-"](1)] === "object" && arguments[arguments.length["-"](1)] [ρσ_kwargs_symbol] === true)) ? ellastic_coll.__defaults__.g2_old : arguments[3];
        var ρσ_kwargs_obj = arguments[arguments.length["-"](1)];
        if (ρσ_kwargs_obj === null || typeof ρσ_kwargs_obj !== "object" || ρσ_kwargs_obj [ρσ_kwargs_symbol] !== true) ρσ_kwargs_obj = {};
        if (Object.prototype.hasOwnProperty.call(ρσ_kwargs_obj, "g1_old")){
            g1_old = ρσ_kwargs_obj.g1_old;
        }
        if (Object.prototype.hasOwnProperty.call(ρσ_kwargs_obj, "g2_old")){
            g2_old = ρσ_kwargs_obj.g2_old;
        }
        var ρσ_ls, v1, v2, v1_new, v2_new;
        "242";
        if (!g1_old) {
            "243";
            v1 = ρσ_getitem(g1, 0).vel;
            "244";
        } else {
            "245";
            v1 = ρσ_getitem(g1, 0).old_vel;
            "247";
        }
        if (!g2_old) {
            "248";
            v2 = ρσ_getitem(g2, 0).vel;
            "249";
        } else {
            "250";
            v2 = ρσ_getitem(g2, 0).old_vel;
        }
        "251";
        v1_new = v2;
        "252";
        v2_new = v1;
        "253";
        return [v1_new, v2_new];
    };
    if (!ellastic_coll.__defaults__) Object.defineProperties(ellastic_coll, {
        __defaults__ : {value: {g1_old:false, g2_old:false}},
        __handles_kwarg_interpolation__ : {value: true},
        __argnames__ : {value: ["g1", "g2", "g1_old", "g2_old"]},
        __module__ : {value: null}
    });

    "255";
    async function wall_coll(g) {
        var ρσ_ls, overlap;
        "256";
        if (ρσ_getitem(g, 0).pos.x["-"](1["*"](ρσ_getitem(g, 0).radius))["<="](1["-u"]()["*"](side)["/"](2))) {
            "257";
            overlap = 1["-u"]()["*"](side)["/"](2)["-"](1["*"](ρσ_getitem(g, 0).pos.x["-"](1["*"](ρσ_getitem(g, 0).radius))));
            "258";
            (await move_x(g, overlap));
            "259";
            ρσ_getitem(g, 0).vel.x = 1["-u"]()["*"](ρσ_getitem(g, 0).vel.x);
            "260";
        } else if (ρσ_getitem(g, 1).pos.x["+"](ρσ_getitem(g, 1).radius)[">="](side["/"](2))) {
            "261";
            overlap = side["/"](2)["-"](1["*"](ρσ_getitem(g, 1).pos.x["+"](ρσ_getitem(g, 1).radius)));
            "262";
            (await move_x(g, overlap));
            "263";
            ρσ_getitem(g, 0).vel.x = 1["-u"]()["*"](ρσ_getitem(g, 0).vel.x);
            "265";
        }
        if (ρσ_getitem(g, 0).pos.y["-"](1["*"](ρσ_getitem(g, 0).radius))["<="](1["-u"]()["*"](side)["/"](2))) {
            "266";
            overlap = 1["-u"]()["*"](side)["/"](2)["-"](1["*"](ρσ_getitem(g, 0).pos.y["-"](1["*"](ρσ_getitem(g, 0).radius))));
            "267";
            (await move_y(g, overlap));
            "268";
            ρσ_getitem(g, 0).vel.y = 1["-u"]()["*"](ρσ_getitem(g, 0).vel.y);
            "269";
        } else if (ρσ_getitem(g, 1).pos.y["+"](ρσ_getitem(g, 1).radius)[">="](side["/"](2))) {
            "270";
            overlap = side["/"](2)["-"](1["*"](ρσ_getitem(g, 1).pos.y["+"](ρσ_getitem(g, 1).radius)));
            "271";
            (await move_y(g, overlap));
            "272";
            ρσ_getitem(g, 0).vel.y = 1["-u"]()["*"](ρσ_getitem(g, 0).vel.y);
        }
    };
    if (!wall_coll.__argnames__) Object.defineProperties(wall_coll, {
        __argnames__ : {value: ["g"]},
        __module__ : {value: null}
    });

    "274";
    async function isSleeping(g) {
        "279";
        if ((ρσ_getitem(g, 0).sleepCounter === 0 || typeof ρσ_getitem(g, 0).sleepCounter === "object" && ρσ_equals(ρσ_getitem(g, 0).sleepCounter, 0))) {
            "280";
            return false;
            "281";
        } else {
            "282";
            return true;
        }
    };
    if (!isSleeping.__argnames__) Object.defineProperties(isSleeping, {
        __argnames__ : {value: ["g"]},
        __module__ : {value: null}
    });

    "285";
    async function Controls(evt) {
        var ρσ_ls, thisBox;
        "286";
        thisBox = playPauseBox.bounding_box();
        "287";
        if (ρσ_getitem(thisBox, 0).x["<"](ρσ_cond_temp = evt.pos.x) && ρσ_cond_temp["<"](ρσ_getitem(thisBox, 1["-u"]()["*"](1)).x)) {
            "288";
            if (ρσ_getitem(thisBox, 0).y["<"](ρσ_cond_temp = evt.pos.y) && ρσ_cond_temp["<"](ρσ_getitem(thisBox, 1["-u"]()["*"](1)).y)) {
                "289";
                (await PlayPause());
            }
        }
        "290";
        thisBox = resetBox.bounding_box();
        "291";
        if (ρσ_getitem(thisBox, 0).x["<"](ρσ_cond_temp = evt.pos.x) && ρσ_cond_temp["<"](ρσ_getitem(thisBox, 1["-u"]()["*"](1)).x)) {
            "292";
            if (ρσ_getitem(thisBox, 0).y["<"](ρσ_cond_temp = evt.pos.y) && ρσ_cond_temp["<"](ρσ_getitem(thisBox, 1["-u"]()["*"](1)).y)) {
                "293";
                (await Reset());
            }
        }
    };
    if (!Controls.__argnames__) Object.defineProperties(Controls, {
        __argnames__ : {value: ["evt"]},
        __module__ : {value: null}
    });

    "295";
    partscreen.bind("click", Controls);
    "296";
    t = 0;
    "297";
    t_i = 0;
    "298";
    while (true) {
        "299";
        (await rate(70));
        "300";
        if (!running) {
            "301";
            "302";
        } else if (t["<"](time_limit)) {
            "303";
            var ρσ_Iter9 = A_list;
            ρσ_Iter9 = ((typeof ρσ_Iter9[Symbol.iterator] === "function") ? (ρσ_Iter9 instanceof Map ? ρσ_Iter9.keys() : ρσ_Iter9) : Object.keys(ρσ_Iter9));
            for (var ρσ_Index9 of ρσ_Iter9) {
                gA = ρσ_Index9;
                "308";
                if (ρσ_getitem(gA, 0).sleepCounter[">"](durSleep["-"](1["*"](1)))) {
                    "309";
                    ρσ_getitem(gA, 0).sleepCounter = 0;
                }
                "310";
                (await wall_coll(gA));
            }
            "311";
            var ρσ_Iter10 = B_list;
            ρσ_Iter10 = ((typeof ρσ_Iter10[Symbol.iterator] === "function") ? (ρσ_Iter10 instanceof Map ? ρσ_Iter10.keys() : ρσ_Iter10) : Object.keys(ρσ_Iter10));
            for (var ρσ_Index10 of ρσ_Iter10) {
                gB = ρσ_Index10;
                "316";
                if (ρσ_getitem(gB, 0).sleepCounter[">"](durSleep["-"](1["*"](1)))) {
                    "317";
                    ρσ_getitem(gB, 0).sleepCounter = 0;
                }
                "318";
                (await wall_coll(gB));
            }
            "319";
            for (var ρσ_Index11 = 0; ρσ_Index11["<"](A_tot); ρσ_Index11++) {
                i = ρσ_Index11;
                "320";
                g1 = ρσ_getitem(A_list, i);
                "321";
                hitlist = (await hit_list(g1, A_list, B_list));
                "322";
                var ρσ_Iter12 = ρσ_getitem(hitlist, "A").slice(i);
                ρσ_Iter12 = ((typeof ρσ_Iter12[Symbol.iterator] === "function") ? (ρσ_Iter12 instanceof Map ? ρσ_Iter12.keys() : ρσ_Iter12) : Object.keys(ρσ_Iter12));
                for (var ρσ_Index12 of ρσ_Iter12) {
                    g2 = ρσ_Index12;
                    "323";
                    c1 = ρσ_getitem(g1, 0).pos;
                    "324";
                    c2 = ρσ_getitem(g2, 0).pos;
                    "325";
                    v1 = ρσ_getitem(g1, 0).vel;
                    "326";
                    v2 = ρσ_getitem(g2, 0).vel;
                    "327";
                    vtot = v1["+"](v2);
                    "328";
                    vrel = v2["-"](1["*"](v1));
                    "329";
                    a = vrel.mag2;
                    "330";
                    if ((a === 0 || typeof a === "object" && ρσ_equals(a, 0))) {
                        "331";
                        continue;
                    }
                    "332";
                    rrel = c1["-"](1["*"](c2));
                    "333";
                    if (rrel.mag[">"](ρσ_getitem(g1, 0).radius)) {
                        "334";
                        continue;
                    }
                    "335";
                    dx = dot(rrel, vrel.hat);
                    "336";
                    dy = cross(rrel, vrel.hat).mag;
                    "337";
                    alpha = asin(dy["/"](ρσ_getitem(g1, 0).radius["+"](ρσ_getitem(g2, 0).radius)));
                    "338";
                    d_in = ρσ_getitem(g1, 0).radius["+"](ρσ_getitem(g2, 0).radius)["*"](cos(alpha))["-"](1["*"](dx));
                    "339";
                    deltat = d_in["/"](vrel.mag);
                    "341";
                    (await move_x(g1, 1["-u"]()["*"](v1.x)["*"](deltat)));
                    "342";
                    (await move_y(g1, 1["-u"]()["*"](v1.y)["*"](deltat)));
                    "343";
                    (await move_x(g2, 1["-u"]()["*"](v2.x)["*"](deltat)));
                    "344";
                    (await move_y(g2, 1["-u"]()["*"](v2.y)["*"](deltat)));
                    "346";
                    pcm1 = v1["-"](1["*"](vtot)["/"](2));
                    "347";
                    pcm2 = v2["-"](1["*"](vtot)["/"](2));
                    "348";
                    rrel = norm(rrel);
                    "349";
                    pcm1=pcm1["-"](2["*"](pcm1.dot(rrel))["*"](rrel));
                    "350";
                    pcm2=pcm2["-"](2["*"](pcm2.dot(rrel))["*"](rrel));
                    "351";
                    ρσ_getitem(g1, 0).vel = pcm1["+"](vtot["*"](1)["/"](2));
                    "352";
                    ρσ_getitem(g2, 0).vel = pcm2["+"](vtot["*"](1)["/"](2));
                    "353";
                    (await move_x(g1, v1.x["*"](deltat)));
                    "354";
                    (await move_y(g1, v1.y["*"](deltat)));
                    "355";
                    (await move_x(g2, v2.x["*"](deltat)));
                    "356";
                    (await move_y(g2, v2.y["*"](deltat)));
                }
                "360";
                var ρσ_Iter13 = ρσ_getitem(hitlist, "B");
                ρσ_Iter13 = ((typeof ρσ_Iter13[Symbol.iterator] === "function") ? (ρσ_Iter13 instanceof Map ? ρσ_Iter13.keys() : ρσ_Iter13) : Object.keys(ρσ_Iter13));
                for (var ρσ_Index13 of ρσ_Iter13) {
                    g2 = ρσ_Index13;
                    "361";
                    ρσ_getitem(g1, 0).old_vel = ρσ_getitem(g1, 0).vel;
                    "362";
                    c1 = ρσ_getitem(g1, 0).pos;
                    "363";
                    c2 = ρσ_getitem(g2, 0).pos;
                    "364";
                    v1 = ρσ_getitem(g1, 0).vel;
                    "365";
                    v2 = ρσ_getitem(g2, 0).vel;
                    "366";
                    vtot = v1["+"](v2);
                    "367";
                    vrel = v2["-"](1["*"](v1));
                    "368";
                    a = vrel.mag2;
                    "369";
                    if ((a === 0 || typeof a === "object" && ρσ_equals(a, 0))) {
                        "370";
                        continue;
                    }
                    "371";
                    rrel = c1["-"](1["*"](c2));
                    "372";
                    if (rrel.mag[">"](ρσ_getitem(g1, 0).radius)) {
                        "373";
                        continue;
                    }
                    "374";
                    dx = dot(rrel, vrel.hat);
                    "375";
                    dy = cross(rrel, vrel.hat).mag;
                    "376";
                    alpha = asin(dy["/"](ρσ_getitem(g1, 0).radius["+"](ρσ_getitem(g2, 0).radius)));
                    "377";
                    d_in = ρσ_getitem(g1, 0).radius["+"](ρσ_getitem(g2, 0).radius)["*"](cos(alpha))["-"](1["*"](dx));
                    "378";
                    deltat = d_in["/"](vrel.mag);
                    "380";
                    (await move_x(g1, 1["-u"]()["*"](v1.x)["*"](deltat)));
                    "381";
                    (await move_y(g1, 1["-u"]()["*"](v1.y)["*"](deltat)));
                    "382";
                    (await move_x(g2, 1["-u"]()["*"](v2.x)["*"](deltat)));
                    "383";
                    (await move_y(g2, 1["-u"]()["*"](v2.y)["*"](deltat)));
                    "385";
                    pcm1 = v1["-"](1["*"](vtot)["/"](2));
                    "386";
                    pcm2 = v2["-"](1["*"](vtot)["/"](2));
                    "387";
                    rrel = norm(rrel);
                    "388";
                    pcm1=pcm1["-"](2["*"](pcm1.dot(rrel))["*"](rrel));
                    "389";
                    pcm2=pcm2["-"](2["*"](pcm2.dot(rrel))["*"](rrel));
                    "390";
                    ρσ_getitem(g1, 0).vel = pcm1["+"](vtot["*"](1)["/"](2));
                    "391";
                    ρσ_getitem(g2, 0).vel = pcm2["+"](vtot["*"](1)["/"](2));
                    "392";
                    (await move_x(g1, v1.x["*"](deltat)));
                    "393";
                    (await move_y(g1, v1.y["*"](deltat)));
                    "394";
                    (await move_x(g2, v2.x["*"](deltat)));
                    "395";
                    (await move_y(g2, v2.y["*"](deltat)));
                    "398";
                    if ((await isSleeping(g1)) || (await isSleeping(g2))) {
                        "399";
                        "400";
                    } else {
                        "402";
                        if (ρσ_getitem(g1, 1).visible && !ρσ_getitem(g2, 1).visible) {
                            "403";
                            chance = random();
                            "404";
                            if (chance["<"](p_HA_A)) {
                                "405";
                                (await deprotonate(g1));
                                "406";
                                (await protonate(g2));
                                "407";
                                ρσ_getitem(g1, 0).sleepCounter = 1;
                                "408";
                                ρσ_getitem(g2, 0).sleepCounter = 1;
                                "411";
                            }
                        } else if (ρσ_getitem(g2, 1).visible && !ρσ_getitem(g1, 1).visible) {
                            "412";
                            chance = random();
                            "413";
                            if (chance["<"](p_A_HA)) {
                                "414";
                                (await deprotonate(g2));
                                "415";
                                (await protonate(g1));
                                "416";
                                ρσ_getitem(g1, 0).sleepCounter = 1;
                                "417";
                                ρσ_getitem(g2, 0).sleepCounter = 1;
                            }
                        }
                    }
                }
            }
            "420";
            for (var ρσ_Index14 = 0; ρσ_Index14["<"](B_tot); ρσ_Index14++) {
                i = ρσ_Index14;
                "421";
                g1 = ρσ_getitem(B_list, i);
                "422";
                hitlist = (await hit_list(g1, A_list, B_list));
                "423";
                var ρσ_Iter15 = ρσ_getitem(hitlist, "A");
                ρσ_Iter15 = ((typeof ρσ_Iter15[Symbol.iterator] === "function") ? (ρσ_Iter15 instanceof Map ? ρσ_Iter15.keys() : ρσ_Iter15) : Object.keys(ρσ_Iter15));
                for (var ρσ_Index15 of ρσ_Iter15) {
                    g2 = ρσ_Index15;
                    "425";
                    ρσ_getitem(g1, 0).old_vel = ρσ_getitem(g1, 0).vel;
                }
                "426";
                var ρσ_Iter16 = ρσ_getitem(hitlist, "B");
                ρσ_Iter16 = ((typeof ρσ_Iter16[Symbol.iterator] === "function") ? (ρσ_Iter16 instanceof Map ? ρσ_Iter16.keys() : ρσ_Iter16) : Object.keys(ρσ_Iter16));
                for (var ρσ_Index16 of ρσ_Iter16) {
                    g2 = ρσ_Index16;
                    "427";
                    c1 = ρσ_getitem(g1, 0).pos;
                    "428";
                    c2 = ρσ_getitem(g2, 0).pos;
                    "429";
                    v1 = ρσ_getitem(g1, 0).vel;
                    "430";
                    v2 = ρσ_getitem(g2, 0).vel;
                    "431";
                    vtot = v1["+"](v2);
                    "432";
                    vrel = v2["-"](1["*"](v1));
                    "433";
                    a = vrel.mag2;
                    "434";
                    if ((a === 0 || typeof a === "object" && ρσ_equals(a, 0))) {
                        "435";
                        continue;
                    }
                    "436";
                    rrel = c1["-"](1["*"](c2));
                    "437";
                    if (rrel.mag[">"](ρσ_getitem(g1, 0).radius)) {
                        "438";
                        continue;
                    }
                    "439";
                    dx = dot(rrel, vrel.hat);
                    "440";
                    dy = cross(rrel, vrel.hat).mag;
                    "441";
                    alpha = asin(dy["/"](ρσ_getitem(g1, 0).radius["+"](ρσ_getitem(g2, 0).radius)));
                    "442";
                    d_in = ρσ_getitem(g1, 0).radius["+"](ρσ_getitem(g2, 0).radius)["*"](cos(alpha))["-"](1["*"](dx));
                    "443";
                    deltat = d_in["/"](vrel.mag);
                    "445";
                    (await move_x(g1, 1["-u"]()["*"](v1.x)["*"](deltat)));
                    "446";
                    (await move_y(g1, 1["-u"]()["*"](v1.y)["*"](deltat)));
                    "447";
                    (await move_x(g2, 1["-u"]()["*"](v2.x)["*"](deltat)));
                    "448";
                    (await move_y(g2, 1["-u"]()["*"](v2.y)["*"](deltat)));
                    "450";
                    pcm1 = v1["-"](1["*"](vtot)["/"](2));
                    "451";
                    pcm2 = v2["-"](1["*"](vtot)["/"](2));
                    "452";
                    rrel = norm(rrel);
                    "453";
                    pcm1=pcm1["-"](2["*"](pcm1.dot(rrel))["*"](rrel));
                    "454";
                    pcm2=pcm2["-"](2["*"](pcm2.dot(rrel))["*"](rrel));
                    "455";
                    ρσ_getitem(g1, 0).vel = pcm1["+"](vtot["*"](1)["/"](2));
                    "456";
                    ρσ_getitem(g2, 0).vel = pcm2["+"](vtot["*"](1)["/"](2));
                    "457";
                    (await move_x(g1, v1.x["*"](deltat)));
                    "458";
                    (await move_y(g1, v1.y["*"](deltat)));
                    "459";
                    (await move_x(g2, v2.x["*"](deltat)));
                    "460";
                    (await move_y(g2, v2.y["*"](deltat)));
                }
            }
            "462";
            var ρσ_Iter17 = A_list;
            ρσ_Iter17 = ((typeof ρσ_Iter17[Symbol.iterator] === "function") ? (ρσ_Iter17 instanceof Map ? ρσ_Iter17.keys() : ρσ_Iter17) : Object.keys(ρσ_Iter17));
            for (var ρσ_Index17 of ρσ_Iter17) {
                gA = ρσ_Index17;
                "463";
                (await move_x(gA, ρσ_getitem(gA, 0).vel.x["*"](dt)));
                "464";
                (await move_y(gA, ρσ_getitem(gA, 0).vel.y["*"](dt)));
                "465";
                if (ρσ_getitem(gA, 0).sleepCounter[">"](0)) {
                    "466";
                    ρσ_getitem(gA, 0).sleepCounter=ρσ_getitem(gA, 0).sleepCounter["+"](1);
                }
            }
            "467";
            var ρσ_Iter18 = B_list;
            ρσ_Iter18 = ((typeof ρσ_Iter18[Symbol.iterator] === "function") ? (ρσ_Iter18 instanceof Map ? ρσ_Iter18.keys() : ρσ_Iter18) : Object.keys(ρσ_Iter18));
            for (var ρσ_Index18 of ρσ_Iter18) {
                gB = ρσ_Index18;
                "468";
                (await move_x(gB, ρσ_getitem(gB, 0).vel.x["*"](dt)));
                "469";
                (await move_y(gB, ρσ_getitem(gB, 0).vel.y["*"](dt)));
                "470";
                if (ρσ_getitem(gB, 0).sleepCounter[">"](0)) {
                    "471";
                    ρσ_getitem(gB, 0).sleepCounter=ρσ_getitem(gB, 0).sleepCounter["+"](1);
                }
            }
            "474";
            fHA.plot(t["*"](real_time), nHA);
            "475";
            fA.plot(t["*"](real_time), nA);
            "476";
            fHB.plot(t["*"](real_time), nHB);
            "477";
            fB.plot(t["*"](real_time), nB);
            "478";
            t=t["+"](dt);
            "479";
            t_i=t_i["+"](1);
            "480";
        }
        if (t[">="](time_limit) && t["<"](time_limit["+"](dt))) {
            "481";
            running = false;
            "482";
            playPauseBox.color = vec(0, .7, 0);
            "483";
            playPauseText.text = "Replay";
        }
    }
};
if (!__main__.__module__) Object.defineProperties(__main__, {
    __module__ : {value: null}
});

;$(function(){ window.__context = { glowscript_container: $("#glowscript").removeAttr("id") }; __main__() })})()
// END JAVASCRIPT
        //--><!]]>
        
        
        </script>
        </div>
    
</body>
